<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FashionAI â€“ Smart Outfit Recommendations</title>
  <meta name="description" content="AI-powered fashion search. Find perfect outfits using text or image search, powered by Google Gemini." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-inner">
    <div class="logo">
      <span class="logo-icon">âœ¦</span>
      <span class="logo-text">Fashion<span class="logo-accent">AI</span></span>
    </div>
    <nav class="nav">
      <a href="#search-section" class="nav-link">Search</a>
      <a href="#featured-section" class="nav-link">Collection</a>
      <a href="#categories-section" class="nav-link">Categories</a>
    </nav>
    <div class="header-badge">
      <span class="badge-dot"></span>
      AI Powered
    </div>
  </div>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <p class="hero-label">Smart Fashion Discovery</p>
    <h1 class="hero-title">Find Your<br /><span class="gradient-text">Perfect Style</span></h1>
    <p class="hero-subtitle">Search with natural language or upload an image.<br/>AI curates personalized outfits just for you.</p>
    <div class="hero-chips">
      <button class="chip" onclick="setQuery('Show me casual blue shirts for men')">ğŸ”µ Blue casual shirts for men</button>
      <button class="chip" onclick="setQuery('suggest party wear for women under 2000')">ğŸ‰ Party wear under â‚¹2000</button>
      <button class="chip" onclick="setQuery('sports shoes for boys')">ğŸ‘Ÿ Sports shoes for boys</button>
    </div>
  </div>
  <div class="hero-bg-orb orb1"></div>
  <div class="hero-bg-orb orb2"></div>
</section>

<!-- SEARCH SECTION -->
<section class="search-section" id="search-section">
  <div class="container">
    <div class="search-card">
      <!-- Tab switcher -->
      <div class="search-tabs" role="tablist">
        <button class="tab-btn active" id="tab-text" role="tab" onclick="switchTab('text')">
          <span class="tab-icon">ğŸ’¬</span> Text Search
        </button>
        <button class="tab-btn" id="tab-image" role="tab" onclick="switchTab('image')">
          <span class="tab-icon">ğŸ“·</span> Image Search
        </button>
      </div>

      <!-- Text search -->
      <div class="search-panel" id="panel-text">
        <div class="search-input-wrap">
          <input
            type="text"
            id="text-query"
            class="search-input"
            placeholder="e.g. blue formal shirts under â‚¹2000, suggest party wear, casual sneakers..."
            autocomplete="off"
          />
          <button class="search-btn" id="search-btn" onclick="doTextSearch()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
            </svg>
            Search
          </button>
        </div>
      </div>

      <!-- Image search -->
      <div class="search-panel hidden" id="panel-image">
        <div
          class="drop-zone"
          id="drop-zone"
          ondragover="event.preventDefault(); this.classList.add('drag-over')"
          ondragleave="this.classList.remove('drag-over')"
          ondrop="handleDrop(event)"
          onclick="document.getElementById('image-input').click()"
        >
          <input type="file" id="image-input" accept="image/*" style="display:none" onchange="handleImageSelect(event)" />
          <div class="drop-zone-inner" id="drop-zone-inner">
            <div class="drop-icon">ğŸ“¸</div>
            <p class="drop-text">Drop an image here or click to browse</p>
            <p class="drop-hint">Upload a photo of clothing to find similar items</p>
          </div>
          <img id="preview-img" class="preview-img hidden" alt="Preview" />
        </div>
        <button class="search-btn full-width" id="image-search-btn" onclick="doImageSearch()" disabled>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m21 21-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0z"/>
          </svg>
          Find Similar Items
        </button>
      </div>
    </div>
  </div>
</section>

<!-- AI RESPONSE / RESULTS -->
<section class="results-section" id="results-section" style="display:none">
  <div class="container">
    <!-- AI advice bubble -->
    <div class="ai-advice" id="ai-advice">
      <div class="ai-avatar">âœ¦</div>
      <div class="ai-text" id="ai-advice-text"></div>
    </div>

    <!-- Results count -->
    <div class="results-header">
      <span class="results-count" id="results-count"></span>
      <div class="loading-spinner hidden" id="spinner">
        <div class="spinner"></div> Searching...
      </div>
    </div>

    <!-- Product grid -->
    <div class="product-grid" id="product-grid"></div>
  </div>
</section>

<!-- FEATURED SECTION -->
<section class="featured-section" id="featured-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Featured Collection</h2>
      <p class="section-subtitle">Handpicked styles for every occasion</p>
    </div>
    <div class="product-grid" id="featured-grid">
      {% for product in featured %}
      <div class="product-card" onclick="window.location='/product/{{ product.ProductId }}'">
        <div class="product-image-wrap">
          <img
            src="{{ product.ImageURL }}"
            alt="{{ product.ProductTitle }}"
            class="product-img"
            loading="lazy"
            onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'"
          />
          <div class="product-badge">{{ product.Usage }}</div>
          <div class="product-overlay">
            <button class="overlay-btn" onclick="event.stopPropagation(); window.location='/product/{{ product.ProductId }}'">View Details</button>
          </div>
        </div>
        <div class="product-info">
          <p class="product-type">{{ product.ProductType }} Â· {{ product.Colour }}</p>
          <h3 class="product-title">{{ product.ProductTitle | truncate(50) }}</h3>
          <div class="product-footer">
            <span class="product-price">â‚¹{{ "{:,}".format(product.Price) }}</span>
            <span class="product-rating">â­ {{ product.Rating }}</span>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- CATEGORIES -->
<section class="categories-section" id="categories-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Browse Categories</h2>
    </div>
    <div class="category-grid">
      <div class="cat-card" onclick="setQuery('casual tops for women')">
        <div class="cat-icon">ğŸ‘—</div>
        <span>Women's Apparel</span>
      </div>
      <div class="cat-card" onclick="setQuery('shirts for men')">
        <div class="cat-icon">ğŸ‘”</div>
        <span>Men's Wear</span>
      </div>
      <div class="cat-card" onclick="setQuery('kids fashion boys')">
        <div class="cat-icon">ğŸ§’</div>
        <span>Boys Fashion</span>
      </div>
      <div class="cat-card" onclick="setQuery('girls fashion casual')">
        <div class="cat-icon">ğŸ‘§</div>
        <span>Girls Fashion</span>
      </div>
      <div class="cat-card" onclick="setQuery('sports shoes sneakers')">
        <div class="cat-icon">ğŸ‘Ÿ</div>
        <span>Footwear</span>
      </div>
      <div class="cat-card" onclick="setQuery('formal wear office')">
        <div class="cat-icon">ğŸ’¼</div>
        <span>Formal Wear</span>
      </div>
      <div class="cat-card" onclick="setQuery('ethnic traditional wear')">
        <div class="cat-icon">ğŸª·</div>
        <span>Ethnic Wear</span>
      </div>
      <div class="cat-card" onclick="setQuery('party wear glamour')">
        <div class="cat-icon">âœ¨</div>
        <span>Party Wear</span>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-brand">
        <div class="logo">
          <span class="logo-icon">âœ¦</span>
          <span class="logo-text">Fashion<span class="logo-accent">AI</span></span>
        </div>
        <p>Powered by Google Gemini Vision API, Sentence Transformers & ChromaDB</p>
      </div>
      <div class="footer-tech">
        <span class="tech-badge">Google Gemini AI</span>
        <span class="tech-badge">Sentence Transformers</span>
        <span class="tech-badge">ChromaDB</span>
        <span class="tech-badge">Flask</span>
      </div>
    </div>
    <p class="footer-copy">Â© 2025 FashionAI â€¢ Dataset: Kaggle Fashion Product Images</p>
  </div>
</footer>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
